# ================================================================
# Model Verification Service Configuration
# ================================================================

# GPU Machine Configuration
# --------------------------

# GPU_MODE: GPU deployment mode
# ➤ Options: remote, local
# ➤ remote: Deploy to remote GPU machine via SSH
# ➤ local: Deploy to local GPU machine (no SSH)
# ➤ Default: remote
GPU_MODE=remote

# GPU_HOST: SSH host for GPU machine (user@hostname)
# ➤ Required when GPU_MODE=remote
# ➤ Format: user@gpu-server.com
# ➤ This machine will be used to deploy and test models
# ➤ Set to "localhost" when GPU_MODE=local
GPU_HOST=user@gpu-server.com

# GPU_SSH_KEY: Path to SSH private key for GPU machine
# ➤ Optional, if not set will use default SSH key
# ➤ Only used when GPU_MODE=remote
# ➤ Example: /root/.ssh/id_rsa
GPU_SSH_KEY=

# GPU_SSH_PORT: SSH port for GPU machine
# ➤ Optional, if not set will use port 22
# ➤ Only used when GPU_MODE=remote
# ➤ Example: 65529
GPU_SSH_PORT=22

# GPU_WORK_DIR: Working directory on GPU machine
# ➤ Directory where models will be deployed
# ➤ Default: /opt/affine/models
GPU_WORK_DIR=/opt/affine/models

# SGLang Docker Configuration
# ----------------------------

# SGLANG_DOCKER_IMAGE: Docker image for SGLang inference
# ➤ Default: lmsysorg/sglang:latest
# ➤ Must support GPU and have SGLang installed
SGLANG_DOCKER_IMAGE=lmsysorg/sglang:latest

# GPU_PORT_RANGE_START: Start of port range for model serving
# ➤ Default: 30000
GPU_PORT_RANGE_START=30000

# GPU_PORT_RANGE_END: End of port range for model serving
# ➤ Default: 31000
GPU_PORT_RANGE_END=31000

# Monitor Configuration
# ----------------------

# VERIFICATION_MONITOR_INTERVAL: Monitor check interval in seconds
# ➤ How often to check R2 for new incentive models
# ➤ Default: 300 (5 minutes)
VERIFICATION_MONITOR_INTERVAL=300

# Verification Configuration
# --------------------------

# VERIFICATION_SAMPLE_SIZE: Number of prompts to test
# ➤ Number of random prompts to compare between Chutes and local
# ➤ Default: 10
VERIFICATION_SAMPLE_SIZE=10

# VERIFICATION_SIMILARITY_THRESHOLD: Similarity threshold for blacklisting
# ➤ Miners with similarity below this will be blacklisted
# ➤ Range: 0.0 to 1.0
# ➤ Lowered from 0.85 to 0.60 to account for inference backend differences
# ➤ Default: 0.60
VERIFICATION_SIMILARITY_THRESHOLD=0.60

# VERIFICATION_SIMILARITY_METRIC: Similarity metric to use
# ➤ Options: token_overlap, cosine, exact_match, llm_judge
# ➤ Changed from token_overlap to cosine for better semantic similarity
# ➤ cosine: Considers word frequency, achieves 97.7% avg similarity
# ➤ token_overlap: Simple Jaccard, only 53.2% avg similarity
# ➤ Default: cosine
VERIFICATION_SIMILARITY_METRIC=cosine

# VERIFICATION_MAX_RETRIES: Maximum retries for failed tasks
# ➤ Default: 3
VERIFICATION_MAX_RETRIES=3

# VERIFICATION_SAMPLE_TAIL: Blocks to look back for sample prompts
# ➤ Increased from 1000 to 10000 for better historical prompt extraction
# ➤ Default: 10000
VERIFICATION_SAMPLE_TAIL=10000

# VERIFICATION_MAX_RESULTS_CHECK: Maximum results to check for prompts
# ➤ Increased from 20000 to 100000 for thorough historical search
# ➤ Default: 100000
VERIFICATION_MAX_RESULTS_CHECK=100000

# Required from main .env
# -----------------------
# These variables should be set in the main .env file:
# - HF_TOKEN: HuggingFace token for downloading models
# - CHUTES_API_KEY: Chutes API key for calling inference
# - R2_FOLDER: R2 bucket name
# - R2_BUCKET_ID: R2 account ID
# - R2_WRITE_ACCESS_KEY_ID: R2 write access key
# - R2_WRITE_SECRET_ACCESS_KEY: R2 write secret key
